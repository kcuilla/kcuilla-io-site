[{"authors":["admin"],"categories":null,"content":"I am an analytics professional with five years of experience leveraging data-driven technology to solve business problems and make processes more efficient. I currently work as a Lead Quantitative Analyst within the fintech industry and generate useful insights from data analysis and visualization.\nI received my Master's Degree in Data Analytics from Penn State University. Prior to my graduate studies, I received a BS degree in Environmental Science \u0026amp; Technology with a focus in the design of ecotechnology systems from the University of Maryland.\n","date":1554595200,"expirydate":-62135596800,"kind":"taxonomy","lang":"en","lastmod":1554595200,"objectID":"2525497d367e79493fd32b198b28f040","permalink":"/authors/admin/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/authors/admin/","section":"authors","summary":"I am an analytics professional with five years of experience leveraging data-driven technology to solve business problems and make processes more efficient. I currently work as a Lead Quantitative Analyst within the fintech industry and generate useful insights from data analysis and visualization.\nI received my Master's Degree in Data Analytics from Penn State University. Prior to my graduate studies, I received a BS degree in Environmental Science \u0026amp; Technology with a focus in the design of ecotechnology systems from the University of Maryland.","tags":null,"title":"Kyle Cuilla","type":"authors"},{"authors":null,"categories":null,"content":"Flexibility This feature can be used for publishing content such as:\n Online courses Project or software documentation Tutorials  The courses folder may be renamed. For example, we can rename it to docs for software/project documentation or tutorials for creating an online course.\nDelete tutorials To remove these pages, delete the courses folder and see below to delete the associated menu link.\nUpdate site menu After renaming or deleting the courses folder, you may wish to update any [[main]] menu links to it by editing your menu configuration at config/_default/menus.toml.\nFor example, if you delete this folder, you can remove the following from your menu configuration:\n[[main]] name = \u0026quot;Courses\u0026quot; url = \u0026quot;courses/\u0026quot; weight = 50  Or, if you are creating a software documentation site, you can rename the courses folder to docs and update the associated Courses menu configuration to:\n[[main]] name = \u0026quot;Docs\u0026quot; url = \u0026quot;docs/\u0026quot; weight = 50  Update the docs menu If you use the docs layout, note that the name of the menu in the front matter should be in the form [menu.X] where X is the folder name. Hence, if you rename the courses/example/ folder, you should also rename the menu definitions in the front matter of files within courses/example/ from [menu.example] to [menu.\u0026lt;NewFolderName\u0026gt;].\n","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"59c3ce8e202293146a8a934d37a4070b","permalink":"/courses/example/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/courses/example/","section":"courses","summary":"Learn how to use Academic's docs layout for publishing online courses, software documentation, and tutorials.","tags":null,"title":"Overview","type":"docs"},{"authors":null,"categories":null,"content":"In this tutorial, I'll share my top 10 tips for getting started with Academic:\nTip 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\nTip 2 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1557010800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557010800,"objectID":"74533bae41439377bd30f645c4677a27","permalink":"/courses/example/example1/","publishdate":"2019-05-05T00:00:00+01:00","relpermalink":"/courses/example/example1/","section":"courses","summary":"In this tutorial, I'll share my top 10 tips for getting started with Academic:\nTip 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim.","tags":null,"title":"Example Page 1","type":"docs"},{"authors":null,"categories":null,"content":"Here are some more tips for getting started with Academic:\nTip 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\nTip 4 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1557010800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557010800,"objectID":"1c2b5a11257c768c90d5050637d77d6a","permalink":"/courses/example/example2/","publishdate":"2019-05-05T00:00:00+01:00","relpermalink":"/courses/example/example2/","section":"courses","summary":"Here are some more tips for getting started with Academic:\nTip 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus.","tags":null,"title":"Example Page 2","type":"docs"},{"authors":[],"categories":null,"content":" Click on the Slides button above to view the built-in slides feature.   Slides can be added in a few ways:\n Create slides using Academic's Slides feature and link using slides parameter in the front matter of the talk file Upload an existing slide deck to static/ and link using url_slides parameter in the front matter of the talk file Embed your slides (e.g. Google Slides) or presentation video on this page using shortcodes .  Further talk details can easily be added to this page using Markdown and $\\rm \\LaTeX$ math code.\n","date":1906549200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1906549200,"objectID":"96344c08df50a1b693cc40432115cbe3","permalink":"/talk/example/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/talk/example/","section":"talk","summary":"An example talk using Academic's Markdown slides feature.","tags":[],"title":"Example Talk","type":"talk"},{"authors":null,"categories":["R"],"content":"\rEarlier this month, I came across a striking chart from NPR that showed the historic in employment in April 2020 due to COVID-19:\nSource: NPR\nThe chart does an excellent job of relaying how historic the drop in payroll was by highlighting the periods of economic recession and adding text labels so that the reader can easily put the drop into historical perspective.\nFor comparison, the chart below is from the Bureau of Labor Statistics where the data was sourced. I think everyone would agree that the chart from NPR does a much better job at relaying the information.\nIdea for Blog Series\rThe chart from NPR inspired me to start a blog series where I try to re-create data visualizations I come across on the internet and share my process with others.\nThis is part one in the series with more to come later.\n\rAcquiring the Data\rThe Total Nonfarm Payroll data is available from the Federal Reserve Bank of St. Louis through it’s Federal Reserve Economic Data (FRED) database.\nLoading the data in R is easy thanks to the fredr package which allows you to fetch data from the FRED API.\nlibrary(fredr)\rIn order to connect to the FRED API, you need to first obtain a FRED API key. Once you have a key, replace the “FRED_API_KEY” below with your key number and you will be granted access to the FRED database.\nfredr_set_key(FRED_API_KEY)\rThe Total Nonfarm Payroll series we want to load is called PAYEMS.\nIn the code below, we just need to specify the series name and include units = \"chg\" in order to get the month-to-month change:\nfredr(series_id = \u0026quot;PAYEMS\u0026quot;, units = \u0026quot;chg\u0026quot;)\r## # A tibble: 976 x 3\r## date series_id value\r## \u0026lt;date\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 1939-01-01 PAYEMS NA\r## 2 1939-02-01 PAYEMS 177\r## 3 1939-03-01 PAYEMS 180\r## 4 1939-04-01 PAYEMS -186\r## 5 1939-05-01 PAYEMS 205\r## 6 1939-06-01 PAYEMS 203\r## 7 1939-07-01 PAYEMS -83\r## 8 1939-08-01 PAYEMS 244\r## 9 1939-09-01 PAYEMS 368\r## 10 1939-10-01 PAYEMS 380\r## # ... with 966 more rows\rThe first observation in dataset above, January 1939, contains a missing value since we pulled the month-to-month change and this was the first month in the series.\nIn the code below, we can replace the NA with 0 by using replace(is.na(.), 0) and create a new column called color_assign that assigns the color black to values with a positive change and red to values with a negative change in order to match the colors used within the NPR chart.\n# Load the tidyverse package which contains dplyr (used below) and ggplot2 (used for creating the chart later)\rlibrary(tidyverse)\rdataset \u0026lt;- fredr(series_id = \u0026quot;PAYEMS\u0026quot;, units = \u0026quot;chg\u0026quot;) %\u0026gt;% replace(is.na(.), 0) %\u0026gt;% mutate(value = value/1000,\rcolor_assign = ifelse(value \u0026gt; 0, \u0026quot;black\u0026quot;, ifelse(value == 0, \u0026quot;grey\u0026quot;, \u0026quot;red\u0026quot;)))\r\n\rCreating the Chart\rThe package we will use to create the chart is the ggplot2 package.\nLet’s start by making a basic plot of the dataset:\nggplot(data = dataset, aes(x = date, y = value, colour = color_assign, fill = color_assign)) +\r# Add columns to plot\rgeom_col(width = 1) +\rtheme_minimal()\rAs you can see, the color_assign column we created earlier matched the names of the colors to the values correctly, but did not match the colors themselves correctly. This is because the ggplot2 package assigns the colors to categories by default, but no worries, as we can change this by manually assigning the colors as shown below:\nggplot(data = dataset, aes(x = date, y = value, colour = color_assign, fill = color_assign)) +\rgeom_col(width = 1) +\r# Assign black, grey, and red colors\rscale_colour_manual(values = c(\u0026quot;#333333\u0026quot;,\u0026quot;#EBEBEB\u0026quot;,\u0026quot;#D8472B\u0026quot;)) +\rscale_fill_manual(values = c(\u0026quot;#333333\u0026quot;,\u0026quot;#EBEBEB\u0026quot;,\u0026quot;#D8472B\u0026quot;)) +\rtheme_minimal()\rAdding Recession Periods\rIn order to add the grey U.S. recession periods in the NPR chart, we first need to define the start and end dates of each recession.\nThe recession dates are available from FRED here dating back to the first recorded U.S. recession in 1857. Since our dataset starts in 1939, we just need the recession periods from everything past that date and we can put them into a table like so below:\nrecession_periods = read.table(textConnection(\r\u0026quot;Start, End\r1945-02-01, 1945-10-01\r1948-11-01, 1949-10-01\r1953-07-01, 1954-05-01\r1957-08-01, 1958-04-01\r1960-04-01, 1961-02-01\r1969-12-01, 1970-11-01\r1973-11-01, 1975-03-01\r1980-01-01, 1980-07-01\r1981-07-01, 1982-11-01\r1990-07-01, 1991-03-01\r2001-03-01, 2001-11-01\r2007-12-01, 2009-06-01\u0026quot;), sep=\u0026#39;,\u0026#39;,\rcolClasses=c(\u0026#39;Date\u0026#39;,\u0026#39;Date\u0026#39;), header=TRUE)\rrecession_periods\r## Start End\r## 1 1945-02-01 1945-10-01\r## 2 1948-11-01 1949-10-01\r## 3 1953-07-01 1954-05-01\r## 4 1957-08-01 1958-04-01\r## 5 1960-04-01 1961-02-01\r## 6 1969-12-01 1970-11-01\r## 7 1973-11-01 1975-03-01\r## 8 1980-01-01 1980-07-01\r## 9 1981-07-01 1982-11-01\r## 10 1990-07-01 1991-03-01\r## 11 2001-03-01 2001-11-01\r## 12 2007-12-01 2009-06-01\rNow, we can add the recession periods to our plot using the geom_rect function and assigning a grey color code to it. Please note that the order of the below code matters. Since we want the recession periods to be displayed behind our data values, it needs to come before we call geom_col or else it will be blocking the month-to-month change columns.\nggplot(data = dataset, aes(x = date, y = value, colour = color_assign, fill = color_assign)) +\r# Add grey bars for recession periods geom_rect(data = recession_periods, inherit.aes = FALSE, aes(xmin = Start, xmax = End, ymin = -Inf, ymax = +Inf), fill = \u0026#39;#EBEBEB\u0026#39;) +\rgeom_col(width = 1) +\rscale_colour_manual(values = c(\u0026quot;#333333\u0026quot;,\u0026quot;#EBEBEB\u0026quot;,\u0026quot;#D8472B\u0026quot;)) +\rscale_fill_manual(values = c(\u0026quot;#333333\u0026quot;,\u0026quot;#EBEBEB\u0026quot;,\u0026quot;#D8472B\u0026quot;)) +\rtheme_minimal()\r\rCleaning up the Axes and Theme\rNow that we have the data plotted, we need to match the aesthetics of the NPR chart. This includes adjusting the axes and removing the vertical lines and legend in our current plot.\nIn order to adjust the axes, we need to first assign the limits for both below:\n# Assign limits for the y axis (in millions)\rylab \u0026lt;- c(-20,-15,-10,-5,0)\r# Change the x axis date range to display every 10 years\rcustom_breaks \u0026lt;- c(min(dataset$date),\rseq(from = as.Date(\u0026quot;1940-01-01\u0026quot;), to = as.Date(\u0026quot;2020-01-01\u0026quot;),\rby = \u0026quot;10 years\u0026quot;),\rmax(dataset$date))\rIn the code below, we’re able to add the word “million” to the y axis label within scale_y_continuous and use scale_x_date to display the custom_breaks correctly on the x axis.\nWe also call a number of arguments within theme, such as panel.grid.major.x = element_blank(), which removes the vertical lines seen on the plot above.\nggplot(data = dataset, aes(x = date, y = value, colour = color_assign, fill = color_assign)) +\rgeom_rect(data = recession_periods, inherit.aes = FALSE, aes(xmin = Start, xmax = End, ymin = -Inf, ymax = +Inf), fill = \u0026#39;#EBEBEB\u0026#39;) +\rgeom_col(width = 1) +\rscale_colour_manual(values = c(\u0026quot;#333333\u0026quot;,\u0026quot;#EBEBEB\u0026quot;,\u0026quot;#D8472B\u0026quot;)) +\rscale_fill_manual(values = c(\u0026quot;#333333\u0026quot;,\u0026quot;#EBEBEB\u0026quot;,\u0026quot;#D8472B\u0026quot;)) +\r# Add the word \u0026#39;million\u0026#39; to the y axis labels\rscale_y_continuous(labels = ifelse(ylab == 0, ylab, paste0(ylab, \u0026#39; million\u0026#39;))) +\r# Display dates on x axis by every 10 years\rscale_x_date(breaks = custom_breaks, labels = c(\u0026quot;\u0026quot;, seq(\u0026quot;1940\u0026quot;,\u0026quot;2020\u0026quot;, by=10), \u0026quot;\u0026quot;), expand = c(0,0,0.08,0)) +\rtheme_minimal() +\r# Clean up aesthetics of chart\rtheme(legend.position = \u0026quot;none\u0026quot;,\raxis.line.x = element_line(size = 0.5, colour = \u0026quot;grey\u0026quot;),\raxis.ticks.x = element_line(colour = \u0026quot;grey\u0026quot;),\raxis.ticks.length.x = unit(0.15, \u0026quot;cm\u0026quot;),\raxis.text.x = element_text(size = 8),\raxis.text.y = element_text(size = 8),\rpanel.grid.minor = element_blank(),\rpanel.grid.major.x = element_blank()) +\r# Remove \u0026#39;date\u0026#39; and \u0026#39;value\u0026#39; axis labels\rlabs(x = \u0026quot;\u0026quot;, y = \u0026quot;\u0026quot;)\r\rAdding Text Labels\rThe only thing left to do is add the text labels to the plot.\nEach label on the NPR chart has a small dot to show exactly where the text label is pointing out. We can add these dots by using geom_point and then add the text to each dot using geom_point and filtering for each date NPR called out.\nggplot(data = dataset, aes(x = date, y = value, colour = color_assign, fill = color_assign)) +\rgeom_rect(data = recession_periods, inherit.aes = FALSE, aes(xmin = Start, xmax = End, ymin = -Inf, ymax = +Inf), fill = \u0026#39;#EBEBEB\u0026#39;) +\rgeom_col(width = 1) +\r# Add red dots to large negative values\rgeom_point(data = .%\u0026gt;% filter(date %in% as.Date(c(\u0026quot;1945-09-01\u0026quot;,\u0026quot;1956-07-01\u0026quot;,\u0026quot;1974-12-01\u0026quot;,\u0026quot;2009-03-01\u0026quot;,\u0026quot;2020-04-01\u0026quot;))), shape = 21, colour = \u0026quot;white\u0026quot;, fill = \u0026quot;#D8472B\u0026quot;, size = 2) +\r# Add black dot to large poisitive values\rgeom_point(data = .%\u0026gt;% filter(date %in% as.Date(\u0026quot;1983-09-01\u0026quot;)), shape = 21, colour = \u0026quot;white\u0026quot;, fill = \u0026quot;#333333\u0026quot;, size = 2) +\r# Add text lable for April 2020\rgeom_text(data = .%\u0026gt;% filter(date == max(date)), aes(label = paste0(\u0026quot;April 2020\\n \u0026quot;, round(value,1),\u0026quot;M\u0026quot;), fontface = 2), vjust = -0.01, hjust = -0.15, size = 3.2, color = \u0026quot;#D8472B\u0026quot;, family = \u0026quot;Arial\u0026quot;) +\r# Add text lable for September 1945\rgeom_text(data = .%\u0026gt;% filter(date == \u0026quot;1945-09-01\u0026quot;), aes(label = paste0(\u0026quot;Sept. 1945\\n\u0026quot;, round(value,1),\u0026quot;M\u0026quot;)), vjust = 1.2, hjust = 0.05, size = 3, color = \u0026quot;#363636\u0026quot;, family = \u0026quot;Arial\u0026quot;) +\r# Add text lable for July 1956\rgeom_text(data = .%\u0026gt;% filter(date == \u0026quot;1956-07-01\u0026quot;), aes(label = paste0(\u0026quot;July 1956\\n\u0026quot;, round(value*1000,1),\u0026quot;K\u0026quot;)), vjust = 1.2, hjust = -0.1, size = 3, color = \u0026quot;#363636\u0026quot;, family = \u0026quot;Arial\u0026quot;) +\r# Add text lable for December 1974\rgeom_text(data = .%\u0026gt;% filter(date == \u0026quot;1974-12-01\u0026quot;), aes(label = paste0(\u0026quot;Dec. 1974\\n\u0026quot;, round(value*1000,1),\u0026quot;K\u0026quot;)), vjust = 1.2, hjust = -0.05, size = 3, color = \u0026quot;#363636\u0026quot;, family = \u0026quot;Arial\u0026quot;) +\r# Add text lable for September 1983\rgeom_text(data = .%\u0026gt;% filter(date == \u0026quot;1983-09-01\u0026quot;), aes(label = paste0(\u0026quot;Sept. 1983\\n+\u0026quot;, round(value,1),\u0026quot;M\u0026quot;)), vjust = -0.15, hjust = 0.1, size = 3, color = \u0026quot;#363636\u0026quot;, family = \u0026quot;Arial\u0026quot;) +\r# Add text lable for March 2009\rgeom_text(data = .%\u0026gt;% filter(date == \u0026quot;2009-03-01\u0026quot;), aes(label = paste0(\u0026quot;March 2009\\n\u0026quot;, round(value*1000,1),\u0026quot;K\u0026quot;)), vjust = 1.2, hjust = -0.05, size = 3, color = \u0026quot;#363636\u0026quot;, family = \u0026quot;Arial\u0026quot;) +\r# Add text lable for Great Recession\rgeom_text(data = .%\u0026gt;% filter(date == \u0026quot;2008-10-01\u0026quot;), aes(label = \u0026quot;Great\\nRecession\u0026quot;, fontface = 3), vjust = -1.5, size = 3.2, color = \u0026quot;#363636\u0026quot;, family = \u0026quot;Arial\u0026quot;) +\rscale_colour_manual(values = c(\u0026quot;#333333\u0026quot;,\u0026quot;#EBEBEB\u0026quot;,\u0026quot;#D8472B\u0026quot;)) +\rscale_fill_manual(values = c(\u0026quot;#333333\u0026quot;,\u0026quot;#EBEBEB\u0026quot;,\u0026quot;#D8472B\u0026quot;)) +\rscale_y_continuous(labels = ifelse(ylab == 0, ylab, paste0(ylab, \u0026#39; million\u0026#39;))) +\rscale_x_date(breaks = custom_breaks, labels = c(\u0026quot;\u0026quot;, seq(\u0026quot;1940\u0026quot;,\u0026quot;2020\u0026quot;, by=10), \u0026quot;\u0026quot;), expand = c(0,0,0.08,0)) +\rtheme_minimal() +\rtheme(legend.position = \u0026quot;none\u0026quot;,\raxis.line.x = element_line(size = 0.5, colour = \u0026quot;grey\u0026quot;),\raxis.ticks.x = element_line(colour = \u0026quot;grey\u0026quot;),\raxis.ticks.length.x = unit(0.15, \u0026quot;cm\u0026quot;),\raxis.text.x = element_text(size = 8),\raxis.text.y = element_text(size = 8),\rpanel.grid.minor = element_blank(),\rpanel.grid.major.x = element_blank()) +\rlabs(x = \u0026quot;\u0026quot;, y = \u0026quot;\u0026quot;)\r\rFinal Result\rAnd there’s our final result. Here’s the plot from NPR again for reference. May not be an exact match but it’s pretty close!\nThank you for following along and stay tuned for more attempts to re-create data visualizations seen on the internet!\n\r\r","date":1590372794,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1590372794,"objectID":"822bd29dbce8f1d26346bd0d82dfc603","permalink":"/post/recreating-data-viz-pt1/","publishdate":"2020-05-24T21:13:14-05:00","relpermalink":"/post/recreating-data-viz-pt1/","section":"post","summary":"Earlier this month, I came across a striking chart from NPR that showed the historic in employment in April 2020 due to COVID-19:\nSource: NPR\nThe chart does an excellent job of relaying how historic the drop in payroll was by highlighting the periods of economic recession and adding text labels so that the reader can easily put the drop into historical perspective.\nFor comparison, the chart below is from the Bureau of Labor Statistics where the data was sourced.","tags":null,"title":"Re-Creating Data Visualizations Seen on the Internet - Part 1","type":"post"},{"authors":null,"categories":["R"],"content":"\r\r\r\rThis post shows you how to create interactive maps in R using the highcharter package.\nWhy Interactive Maps?\rStatic maps are an effective visual tool that communicate geographic data in an interpretive way that is generally lost if that data is only viewed in a spreadsheet.\nAdding interactivity to a map further improves data interpretability by allowing users to:\n\rExplore the data by zooming in on areas of interest\rChoose what data values to be displayed or excluded\rHover over an area of interest and get additional info/the exact value that’s being displayed\r\r\rInteractive Choropleth Map\rThe first interactive map I will show you how to create is a population density map by county for the state of Texas:\n\r{\"x\":{\"url\":\"/post/maps-in-r_files/figure-html//widgets/widget_unnamed-chunk-2.html\",\"options\":{\"xdomain\":\"*\",\"allowfullscreen\":false,\"lazyload\":false}},\"evals\":[],\"jsHooks\":[]}\r\nPrerequisites\rBefore we get started, you will need to load the following packages:\nlibrary(data.table)\rlibrary(highcharter)\rlibrary(dplyr)\rlibrary(tidyr)\rlibrary(RColorBrewer)\r\rData Prep\rThe dataset we’ll be using is from the USDA ERS. The data is available in both xlsx and csv format. I downloaded the data in csv format and loaded the People.csv file which contains the population estimates:\n# Load USDA ERS dataset\rcounty_df \u0026lt;- fread(\u0026quot;C:/Users/Kyle/Downloads/People.csv\u0026quot;) %\u0026gt;% filter(State == \u0026#39;TX\u0026#39;)\rThe dataset contains FIPS codes for each county. In order to map this data, we will need to join it to the dataset containing the geographic information for each county from the highcharter package.\n# Load Texas county map\rtx_counties \u0026lt;- get_data_from_map(download_map_data(\u0026quot;countries/us/us-tx-all\u0026quot;))\rglimpse(tx_counties)\r## Observations: 254\r## Variables: 7\r## $ `hc-group` \u0026lt;chr\u0026gt; \u0026quot;admin2\u0026quot;, \u0026quot;admin2\u0026quot;, \u0026quot;admin2\u0026quot;, \u0026quot;admin2\u0026quot;, \u0026quot;admin2\u0026quot;, \u0026quot;ad...\r## $ `hc-middle-x` \u0026lt;dbl\u0026gt; 0.50, 0.50, 0.50, 0.50, 0.50, 0.52, 0.36, 0.50, 0.50,...\r## $ `hc-middle-y` \u0026lt;dbl\u0026gt; 0.50, 0.50, 0.50, 0.50, 0.77, 0.50, 0.36, 0.50, 0.50,...\r## $ `hc-key` \u0026lt;chr\u0026gt; \u0026quot;us-tx-179\u0026quot;, \u0026quot;us-tx-393\u0026quot;, \u0026quot;us-tx-311\u0026quot;, \u0026quot;us-tx-131\u0026quot;, \u0026quot;...\r## $ `hc-a2` \u0026lt;chr\u0026gt; \u0026quot;GR\u0026quot;, \u0026quot;RO\u0026quot;, \u0026quot;MC\u0026quot;, \u0026quot;DU\u0026quot;, \u0026quot;LO\u0026quot;, \u0026quot;LE\u0026quot;, \u0026quot;HO\u0026quot;, \u0026quot;LA\u0026quot;, \u0026quot;BA\u0026quot;,...\r## $ fips \u0026lt;chr\u0026gt; \u0026quot;48179\u0026quot;, \u0026quot;48393\u0026quot;, \u0026quot;48311\u0026quot;, \u0026quot;48131\u0026quot;, \u0026quot;48297\u0026quot;, \u0026quot;48289\u0026quot;,...\r## $ name \u0026lt;chr\u0026gt; \u0026quot;Gray\u0026quot;, \u0026quot;Roberts\u0026quot;, \u0026quot;McMullen\u0026quot;, \u0026quot;Duval\u0026quot;, \u0026quot;Live Oak\u0026quot;, \u0026quot;...\rBefore joining the datasets, we need to calculate the population density for 2018. We can do this by using mutate from the dplyr package to create a column called ‘density’ and divide the ‘TotalPopEst2018’ column by the ‘LandAreaSQMiles2010’ column as shown below:\n# Calculate population density\rdensity_df \u0026lt;- county_df %\u0026gt;% select(c(fips=FIPS,County,TotalPopEst2018,LandAreaSQMiles2010)) %\u0026gt;%\rmutate(density = round(TotalPopEst2018/LandAreaSQMiles2010,0))\rhead(density_df)\r## fips County TotalPopEst2018 LandAreaSQMiles2010 density\r## 1 48000 Texas 28701845 261231.71 110\r## 2 48001 Anderson 58057 1062.60 55\r## 3 48003 Andrews 18128 1500.71 12\r## 4 48005 Angelina 87092 797.78 109\r## 5 48007 Aransas 23792 252.07 94\r## 6 48009 Archer 8786 903.11 10\r\rCreating the Map\rUsing the hcmap function from highcharter, we can create a basic interactive map like this one:\n# Create interactive map of Texas counties\rdensity_map \u0026lt;- hcmap(map = \u0026quot;countries/us/us-tx-all\u0026quot;, data = density_df, value = \u0026quot;density\u0026quot;, joinBy = c(\u0026quot;fips\u0026quot;)) %\u0026gt;%\rhc_mapNavigation(enabled = TRUE)\r\r{\"x\":{\"url\":\"/post/maps-in-r_files/figure-html//widgets/widget_unnamed-chunk-8.html\",\"options\":{\"xdomain\":\"*\",\"allowfullscreen\":false,\"lazyload\":false}},\"evals\":[],\"jsHooks\":[]}\r\nCustomizing the Map\rIn the map above, the counties with the highest population densities clearly stand out. However, it is difficult to distinguish the differences between the counties with lower population densities.\nIn order to correct this, we can assign color breaks to the data by utilizing the hc_colorAxis function and assigning a color palette from the RColorBrewer package:\n# Add color classes and legend to map\rdensity_map \u0026lt;- hcmap(map = \u0026quot;countries/us/us-tx-all\u0026quot;, data = density_df, value = \u0026quot;density\u0026quot;, joinBy = c(\u0026quot;fips\u0026quot;),\rborderWidth = 0.3) %\u0026gt;%\rhc_mapNavigation(enabled = TRUE) %\u0026gt;% hc_legend(layout = \u0026quot;vertical\u0026quot;, align = \u0026quot;right\u0026quot;,\rvalueDecimals = 0) %\u0026gt;% hc_colorAxis(dataClasses = color_classes(breaks = c(0,10,25,50,100,250,500,1000,2500,max(density_df$density)),\rcolors = brewer.pal(name=\u0026quot;YlOrRd\u0026quot;,n=9)))\rThe next thing we will need to do is modify what is displayed when you hover (or click if you are viewing on a mobile device) on a particular county.\nBy creating a JavaScript function within the hc_tooltip option, we can more clearly display the name and population density for each county.\n# Add custom tooltip to map\rdensity_map \u0026lt;- density_map %\u0026gt;%\rhc_tooltip(formatter = JS(\u0026quot;function() {\rreturn (\u0026#39;\u0026lt;br\u0026gt;\u0026lt;b\u0026gt;County:\u0026lt;/b\u0026gt; \u0026#39; + this.point.County +\r\u0026#39;\u0026lt;br\u0026gt;\u0026lt;b\u0026gt;Population Density:\u0026lt;/b\u0026gt; \u0026#39; + this.point.density + \u0026#39; people per sq mi\u0026#39;\r)}\u0026quot;))\rNow, the only thing left is to add a title and source to the map which we can do with the hc_title and hc_credits options:\n# Add title and credits to map\rdensity_map \u0026lt;- density_map %\u0026gt;% hc_title(text = \u0026quot;Population Density by County, 2018\u0026quot;) %\u0026gt;%\rhc_credits(enabled = TRUE,\rtext = \u0026quot;Author: Kyle Cuilla, Data: USDA ERS\u0026quot;,\rhref = \u0026quot;https://www.ers.usda.gov/data-products/atlas-of-rural-and-small-town-america/download-the-data/\u0026quot;)\rAnd here is our final result!\n\r{\"x\":{\"url\":\"/post/maps-in-r_files/figure-html//widgets/widget_unnamed-chunk-12.html\",\"options\":{\"xdomain\":\"*\",\"allowfullscreen\":false,\"lazyload\":false}},\"evals\":[],\"jsHooks\":[]}\r\n\r\r\rAnimated Choropleth Map\rSo now we have our map that displays the population density by county in 2018.\nLet’s say that we want to see how the population density has changed over time. How would we go about doing this?\nWell, we could create nine separate maps (one for each year from 2010 to 2018), but this would take up a lot of space and because the maps would each be separate, and because each map would be separate, it may be difficult to detect subtle difference between each year.\nTo solve these issues, we can create an animated map instead:\n\r{\"x\":{\"url\":\"/post/maps-in-r_files/figure-html//widgets/widget_unnamed-chunk-14.html\",\"options\":{\"xdomain\":\"*\",\"allowfullscreen\":false,\"lazyload\":false}},\"evals\":[],\"jsHooks\":[]}\r\nData Prep\rThe county_df dataset we’ve been using contains estimated populations for each year.\nWe can calculate the population densities for each of these years by creating a function called ‘pop_density’ and applying it to each population estimate.\nWe can then use the gather function from the tidyr package to put all of the population densities into a single column called ‘density’ and all of the years into a single column called ‘years’.\n# Calculate population density for each year in dataset\rpop_density \u0026lt;- function(x){\rround(x/county_df$LandAreaSQMiles2010,0)\r}\rdensity_df_by_year \u0026lt;- county_df %\u0026gt;% select(c(FIPS,State,County,\r\u0026#39;2010\u0026#39;=TotalPopEst2010,\r\u0026#39;2011\u0026#39;=TotalPopEst2011,\r\u0026#39;2012\u0026#39;=TotalPopEst2012,\r\u0026#39;2013\u0026#39;=TotalPopEst2013,\r\u0026#39;2014\u0026#39;=TotalPopEst2014,\r\u0026#39;2015\u0026#39;=TotalPopEst2015,\r\u0026#39;2016\u0026#39;=TotalPopEst2016,\r\u0026#39;2017\u0026#39;=TotalPopEst2017,\r\u0026#39;2018\u0026#39;=TotalPopEst2018)) %\u0026gt;%\rmutate_at(vars(matches(\u0026quot;201\u0026quot;)),pop_density) %\u0026gt;%\rfilter(State == \u0026#39;TX\u0026#39;) %\u0026gt;%\rgather(year,density,-c(FIPS,State,County)) %\u0026gt;%\rmutate(fips = ifelse(nchar(FIPS)\u0026lt;5,paste0(\u0026quot;0\u0026quot;,FIPS),FIPS)) %\u0026gt;%\rfilter(!grepl(\u0026#39;000\u0026#39;,FIPS),\r!State == \u0026#39;US\u0026#39;)\rhead(density_df_by_year)\r## FIPS State County year density fips\r## 1 48001 TX Anderson 2010 55 48001\r## 2 48003 TX Andrews 2010 10 48003\r## 3 48005 TX Angelina 2010 109 48005\r## 4 48007 TX Aransas 2010 92 48007\r## 5 48009 TX Archer 2010 10 48009\r## 6 48011 TX Armstrong 2010 2 48011\rThe animated highcarter map needs the population densities in a single list called ‘sequence’ in order to work properly. We can create the list of densities by using the list_parse function:\n# Create list column containing population densities by year density_df_seq \u0026lt;- density_df_by_year %\u0026gt;%\rgroup_by(fips) %\u0026gt;%\rdo(sequence = list_parse(select(., value = density)))\rhead(density_df_seq)\r## Source: local data frame [6 x 2]\r## Groups: \u0026lt;by row\u0026gt;\r## ## # A tibble: 6 x 2\r## fips sequence ## \u0026lt;int\u0026gt; \u0026lt;list\u0026gt; ## 1 48001 \u0026lt;list [9]\u0026gt;\r## 2 48003 \u0026lt;list [9]\u0026gt;\r## 3 48005 \u0026lt;list [9]\u0026gt;\r## 4 48007 \u0026lt;list [9]\u0026gt;\r## 5 48009 \u0026lt;list [9]\u0026gt;\r## 6 48011 \u0026lt;list [9]\u0026gt;\rYou can see in the output we have a column containing the FIPS codes for each county and a list of length 9 which contains one population density value for each year from 2010 to 2018.\nNext, we need to join this dataset back to the original dataset so that we have the county names, years, and population densities all in one dataset:\n# Join with original dataset\rdensity_df_by_year \u0026lt;- left_join(density_df_by_year,density_df_seq)\r## Joining, by = \u0026quot;fips\u0026quot;\rhead(density_df_by_year)\r## FIPS State County year density fips\r## 1 48001 TX Anderson 2010 55 48001\r## 2 48003 TX Andrews 2010 10 48003\r## 3 48005 TX Angelina 2010 109 48005\r## 4 48007 TX Aransas 2010 92 48007\r## 5 48009 TX Archer 2010 10 48009\r## 6 48011 TX Armstrong 2010 2 48011\r## sequence\r## 1 55, 55, 55, 55, 54, 54, 54, 55, 55\r## 2 10, 10, 11, 11, 12, 12, 12, 12, 12\r## 3 109, 109, 110, 109, 110, 110, 110, 110, 109\r## 4 92, 92, 93, 95, 97, 98, 100, 101, 94\r## 5 10, 10, 10, 10, 10, 10, 10, 10, 10\r## 6 2, 2, 2, 2, 2, 2, 2, 2, 2\r\rCreating the Map\rTo create the animated map, all we need to do is take the existing density_map that we created and update the dataset from density_df to density_df_by_year\n# Create interactive map of Texas counties\ranimated_map \u0026lt;- hcmap(map = \u0026quot;countries/us/us-tx-all\u0026quot;, data = density_df_by_year, value = \u0026quot;density\u0026quot;, joinBy = c(\u0026quot;fips\u0026quot;),\rborderWidth = 0.3) %\u0026gt;%\rhc_mapNavigation(enabled = TRUE) %\u0026gt;% hc_colorAxis(dataClasses = color_classes(breaks = c(0,10,25,50,100,250,500,1000,2500,max(density_df_by_year$density)),\rcolors = brewer.pal(name=\u0026quot;YlOrRd\u0026quot;,n=9))) %\u0026gt;%\rhc_legend(layout = \u0026quot;vertical\u0026quot;, align = \u0026quot;right\u0026quot;,\rvalueDecimals = 0) %\u0026gt;% hc_tooltip(formatter = JS(\u0026quot;function() {\rreturn (\u0026#39;\u0026lt;br\u0026gt;\u0026lt;b\u0026gt;County:\u0026lt;/b\u0026gt; \u0026#39; + this.point.County +\r\u0026#39;\u0026lt;br\u0026gt;\u0026lt;b\u0026gt;Population Density:\u0026lt;/b\u0026gt; \u0026#39; + this.point.density + \u0026#39; people per sq mi\u0026#39;\r)}\u0026quot;)) %\u0026gt;%\rhc_title(text = \u0026quot;Population Density by County, 2010 to 2018\u0026quot;) %\u0026gt;%\rhc_credits(enabled = TRUE,\rtext = \u0026quot;Author: Kyle Cuilla, Data: USDA ERS\u0026quot;,\rhref = \u0026quot;https://www.ers.usda.gov/data-products/atlas-of-rural-and-small-town-america/download-the-data/\u0026quot;) \rAnd then add the hc_motion option to the map:\n# Add animation to map\ranimated_map \u0026lt;- animated_map %\u0026gt;% hc_motion(enabled = TRUE, series = 0, autoPlay = TRUE,\rloop = TRUE,\rlabels = unique(density_df_by_year$year))\r\r{\"x\":{\"url\":\"/post/maps-in-r_files/figure-html//widgets/widget_unnamed-chunk-20.html\",\"options\":{\"xdomain\":\"*\",\"allowfullscreen\":false,\"lazyload\":false}},\"evals\":[],\"jsHooks\":[]}\r\n\r\r","date":1586139194,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1586139194,"objectID":"24af6d4282556969af3f5cb54f70d1cb","permalink":"/post/maps-in-r/","publishdate":"2020-04-05T21:13:14-05:00","relpermalink":"/post/maps-in-r/","section":"post","summary":"This post shows you how to create interactive maps in R using the highcharter package.\nWhy Interactive Maps?\rStatic maps are an effective visual tool that communicate geographic data in an interpretive way that is generally lost if that data is only viewed in a spreadsheet.\nAdding interactivity to a map further improves data interpretability by allowing users to:\n\rExplore the data by zooming in on areas of interest\rChoose what data values to be displayed or excluded\rHover over an area of interest and get additional info/the exact value that’s being displayed\r\r\rInteractive Choropleth Map\rThe first interactive map I will show you how to create is a population density map by county for the state of Texas:","tags":null,"title":"Interactive Maps in R","type":"post"},{"authors":null,"categories":["R"],"content":"\rWhen comparing the different programming languages, what sets R apart from the rest is the community. I’ve learned an incredible amount from people who are constantly helping others by sharing their knowledge and hard work.\nLately, I’ve been looking for ways to give back to the community and share some of the knowledge I’ve acquired over the years in hopes of helping others like myself. That’s when I stumbled upon blogdown, an R package designed to help you create your own website.\nThis post outlines how I was able to create my website using blogdown and a couple other tools, as well as some resources that were beneficial to me during the process.\nGetting Started\rI highly recommend reading the first few chapters of blogdown: Creating Websites with R Markdown by Yihui Xie, Amber Thomas, and Alison Presmanes Hill. Not only does the book teach you how to use the blogdown package in R, but it also provides a good tutorial on Hugo, which controls the theme of your website, and Netlify, which is what I’m using to host my site.\n\rGitHub and RStudio\rThe first thing you will need to do is create a new repository on GitHub. If you are new to GitHub and are not sure how to do this, all you need to do is go to your GitHub account and click New repository in the dropdown that looks like a plus (+) sign in the upper right-hand corner and give the repository a unique name.\nOnce you’ve created the repository, you will need to install Git and set it up within RStudio. If you already have Git setup in RStudio, then skip ahead to the next paragraph. If it isn’t setup, then follow the instructions outlined in this post before continuing.\nThe next step is to create a new project in RStudio with Git version control by way of File -\u0026gt; New Project -\u0026gt; Version Control -\u0026gt; Git. You will see the following form below:\n\rRepository URL: the URL of the GitHub repository you just made. For my site, this is https://github.com/kcuilla/kcuilla-io-site\rProject directory name: the name of your GitHub repository. For my site, this is kcuilla-io-site\rCreate project as a subdirectory of: the folder location on your local computer where all your files for the site will be stored\r\rAfter filling out the form and clicking Create Project, your GitHub repository will be linked to your project in RStudio and you will be able to see any changes you make to the files within your working directory in the Git tab as shown below:\n\rBlogdown and Hugo\rInstall the blogdown package and Hugo in RStudio:\ninstall.packages(\u0026quot;blogdown\u0026quot;)\rlibrary(blogdown)\rblogdown::install_hugo()\rPick a theme for your website from Hugo Themes. The theme I settled on was the Academic theme because I liked both the look and the functionality, but there are plenty of other options available as well.\nOnce you have chosen a theme, you can download it using the following blogdown command:\n# Replace user/repo from the theme\u0026#39;s GitHub repository\rblogdown::new_site(theme = \u0026#39;user/repo\u0026#39;)\rThe files that control the contents of the theme should now be available in your working directory and you can view them by navigating through the Files tab in RStudio as shown below:\n(Note: I will not go into detail on how to edit the configuration files as these differ for each theme. However, normally there are tutorials provided by the theme creators, and if you’re interested in the edits that I made for the Academic theme, you can view them on my GitHub)\nIn order view your configuration edits to your site, run blogdown::serve_site() and you will be able to see a preview of your website in the Viewer tab in RStudio. You also have the option to view it in your browser by clicking the ‘Show in new window’ icon.\n\rGit and Netlify\rBefore deploying your site on Netlify, you’ll first need to push them to your GitHub repository using Git in RStudio.\nThere are a couple ways to do this. If you are already comfortable using Git commands, then you can use git commit and git push in your Terminal.\nHowever, if you’re unfamiliar with Git, RStudio has a Git interface that makes this step easier.\nWithin the Git tab, click the Commit button. This will pop open a window that looks like the image shown below. You can select the changes you wish to commit by clicking the check boxes in the ‘Staged’ column. Then, you will need to provide a commit message that describes the changes you made before clicking the Commit button.\nOnce you click Commit, the files you selected should disappear, and now all you need to do is click the Push button and the files will be pushed to your repository and you should be able to see them all in GitHub as shown below.\nNow that you have all of your files on GitHub, you can deploy your site using Netlify.\nAfter signing up for an account, click the New Site from Git button and follow the steps to link Netlify to your GitHub repository. Netlify will give you a randomly-generated domain name for you site, but you can change the name within the Site Settings.\nTest out the site in your browser to make sure everything is up and running as expected:\nIf you want to make any edits to your site in the future, all you will need to do is edit the configuration files in RStudio, push the commits to your GitHub repository, and then Netlify will automatically update to display the new content.\n\r","date":1581041594,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1581041594,"objectID":"e92d097e92faa9e8604d1ec753a0e66d","permalink":"/post/website-with-blogdown/","publishdate":"2020-02-06T21:13:14-05:00","relpermalink":"/post/website-with-blogdown/","section":"post","summary":"When comparing the different programming languages, what sets R apart from the rest is the community. I’ve learned an incredible amount from people who are constantly helping others by sharing their knowledge and hard work.\nLately, I’ve been looking for ways to give back to the community and share some of the knowledge I’ve acquired over the years in hopes of helping others like myself. That’s when I stumbled upon blogdown, an R package designed to help you create your own website.","tags":null,"title":"How to Create a Website in R Using the Blogdown Package","type":"post"},{"authors":["Kyle Cuilla"],"categories":null,"content":" Click the Slides button above to demo Academic's Markdown slides feature.   Supplementary notes can be added here, including code and math .\n","date":1554595200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1554595200,"objectID":"557dc08fd4b672a0c08e0a8cf0c9ff7d","permalink":"/publication/preprint/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/publication/preprint/","section":"publication","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example preprint / working paper","type":"publication"},{"authors":[],"categories":[],"content":"Create slides in Markdown with Academic  Academic | Documentation  Features  Efficiently write slides in Markdown 3-in-1: Create, Present, and Publish your slides Supports speaker notes Mobile friendly slides   Controls  Next: Right Arrow or Space Previous: Left Arrow Start: Home Finish: End Overview: Esc Speaker notes: S Fullscreen: F Zoom: Alt + Click  PDF Export : E   Code Highlighting Inline code: variable\nCode block:\nporridge = \u0026quot;blueberry\u0026quot; if porridge == \u0026quot;blueberry\u0026quot;: print(\u0026quot;Eating...\u0026quot;)   Math In-line math: $x + y = z$\nBlock math:\n$$ f\\left( x \\right) = ;\\frac{{2\\left( {x + 4} \\right)\\left( {x - 4} \\right)}}{{\\left( {x + 4} \\right)\\left( {x + 1} \\right)}} $$\n Fragments Make content appear incrementally\n{{% fragment %}} One {{% /fragment %}} {{% fragment %}} **Two** {{% /fragment %}} {{% fragment %}} Three {{% /fragment %}}  Press Space to play!\nOne  Two  Three \n A fragment can accept two optional parameters:\n class: use a custom style (requires definition in custom CSS) weight: sets the order in which a fragment appears   Speaker Notes Add speaker notes to your presentation\n{{% speaker_note %}} - Only the speaker can read these notes - Press `S` key to view {{% /speaker_note %}}  Press the S key to view the speaker notes!\n Only the speaker can read these notes Press S key to view    Themes  black: Black background, white text, blue links (default) white: White background, black text, blue links league: Gray background, white text, blue links beige: Beige background, dark text, brown links sky: Blue background, thin dark text, blue links    night: Black background, thick white text, orange links serif: Cappuccino background, gray text, brown links simple: White background, black text, blue links solarized: Cream-colored background, dark green text, blue links   Custom Slide Customize the slide style and background\n{{\u0026lt; slide background-image=\u0026quot;/img/boards.jpg\u0026quot; \u0026gt;}} {{\u0026lt; slide background-color=\u0026quot;#0000FF\u0026quot; \u0026gt;}} {{\u0026lt; slide class=\u0026quot;my-style\u0026quot; \u0026gt;}}   Custom CSS Example Let's make headers navy colored.\nCreate assets/css/reveal_custom.css with:\n.reveal section h1, .reveal section h2, .reveal section h3 { color: navy; }   Questions?  Ask  Documentation ","date":1549324800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1549324800,"objectID":"0e6de1a61aa83269ff13324f3167c1a9","permalink":"/slides/example/","publishdate":"2019-02-05T00:00:00Z","relpermalink":"/slides/example/","section":"slides","summary":"An introduction to using Academic's Slides feature.","tags":[],"title":"Slides","type":"slides"},{"authors":null,"categories":null,"content":"","date":1461715200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461715200,"objectID":"d1311ddf745551c9e117aa4bb7e28516","permalink":"/project/external-project/","publishdate":"2016-04-27T00:00:00Z","relpermalink":"/project/external-project/","section":"project","summary":"An example of linking directly to an external project website using `external_link`.","tags":["Demo"],"title":"External Project","type":"project"},{"authors":null,"categories":null,"content":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1461715200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461715200,"objectID":"8f66d660a9a2edc2d08e68cc30f701f7","permalink":"/project/internal-project/","publishdate":"2016-04-27T00:00:00Z","relpermalink":"/project/internal-project/","section":"project","summary":"An example of using the in-built project page.","tags":["Deep Learning"],"title":"Internal Project","type":"project"},{"authors":["Kyle Cuilla","Robert Ford"],"categories":null,"content":" Click the Cite button above to demo the feature to enable visitors to import publication metadata into their reference management software.    Click the Slides button above to demo Academic's Markdown slides feature.   Supplementary notes can be added here, including code and math .\n","date":1441065600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1441065600,"objectID":"966884cc0d8ac9e31fab966c4534e973","permalink":"/publication/journal-article/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/publication/journal-article/","section":"publication","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example journal article","type":"publication"},{"authors":["Kyle Cuilla","Robert Ford"],"categories":null,"content":" Click the Cite button above to demo the feature to enable visitors to import publication metadata into their reference management software.    Click the Slides button above to demo Academic's Markdown slides feature.   Supplementary notes can be added here, including code and math .\n","date":1372636800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1372636800,"objectID":"69425fb10d4db090cfbd46854715582c","permalink":"/publication/conference-paper/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/publication/conference-paper/","section":"publication","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example conference paper","type":"publication"}]